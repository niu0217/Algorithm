# 最大平分数组

## 题目

[148、最大平分数组](https://sars2025.blog.csdn.net/article/details/131969408)

## 代码

### 示例

```c++
输入
9
5 2 1 5 2 1 5 2 1



输出
4


说明：
4
可以等分的情况有:
4个子集(5,1)，(5,1)，(5,1)，(2,2,2)
2个子集(5,1,5,1) ，(2,2, 2,5,1)
最大的平分组数个数为4个。

```

### 自己

```c++
#include<iostream>
#include<vector>
#include<algorithm>
#include<numeric>
#include<climits>

using namespace std;

bool partition(vector<int>& nums, int m, int subSum, vector<int>& buckets, int index) {
    if(index == nums.size()) {
        return true;
    }
    int value = nums[index];
    for(int i = 0; i < buckets.size(); i++) {
        //去重
        if(i > 0 && buckets[i] == buckets[i - 1]) {
            continue;
        }
        if(value + buckets[i] <= subSum) {
            buckets[i] += value;
            if(partition(nums, m, subSum, buckets, index + 1)) {
                return true;
            }
            buckets[i] -= value;
        }
    }
    return false;
}

bool canPartitionMSubsets(vector<int>& nums, int m, int sum) {
    if(sum % m != 0) {
        return false;
    }
    int subSum = sum / m;
    if(subSum < nums[nums.size() - 1]) {
        return false;
    }
    while(!nums.empty() && nums[0] == subSum) {
        nums.erase(nums.begin());
        m--;
    }
    vector<int> buckets(m, 0);
    return partition(nums, m, subSum, buckets, 0);
}

int main()
{
    int m;
    cin>>m;
    vector<int> nums(m, 0);
    for(int i = 0; i < m; i++) {
        cin>>nums[i];
    }

    sort(nums.begin(), nums.end(), greater<int>());
    int sum = accumulate(nums.begin(), nums.end(), 0);
    while(m > 0) {
        if(canPartitionMSubsets(nums, m, sum)) {
            cout<<m<<endl;
            break;
        }
        m--;
    }
    if(m < 1) {
        cout<<0<<endl;
    }
}
```

