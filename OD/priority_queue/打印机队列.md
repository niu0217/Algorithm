# 打印机队列

## [题目链接](https://blog.csdn.net/m0_47384542/article/details/131976831)

## 代码

### 自己

```c++
#include<iostream>
#include<vector>
#include<queue>
#include<string>

using namespace std;

struct Task {
    int fileNumber; //文件编号
    int priority; //优先级
    int taskId; //用于判断进入队列的先后顺序
    Task() {

    }
    Task(int fileNumber, int priority, int taskId)
        : fileNumber{fileNumber}, priority{priority}, taskId{taskId} { }
    bool operator< (const Task& other) const {
        if(other.priority != priority) {
            return priority < other.priority; //优先级越小，优先级越高
        }
        return taskId > other.taskId;
    }
};

int main()
{
    vector<priority_queue<Task>> printerVec(6); //打印机集合
    int fileNumber = 1;
    int n; //n个操作
    cin>>n;
    for(int i = 0; i < n; i++) {
        string action;
        int printer;
        int filePriority;
        int fileAddTime;
        cin>>action;
        if(action == "IN") {
            cin>>printer>>filePriority;
            printerVec[printer].push(Task(fileNumber, filePriority, i));
            fileNumber++;
        }
        else if(action == "OUT") {
            cin>>printer;
            if(!printerVec[printer].empty()) {
                Task task = printerVec[printer].top();
                printerVec[printer].pop();
                cout<<task.fileNumber<<endl;
                fileNumber++;
            }
            else {
                cout<<"NULL"<<endl;
            }
        }
    }
}
```

### 外部

```c++
#include <iostream>
#include <queue>
#include <vector>

using namespace std;

struct Task {
    int num; //文件编号
    int priority; //优先级
    int taskId; //用于判断进入队列的先后顺序

    Task() {} // Default constructor

    Task(int num, int priority, int taskId) : num(num), priority(priority), taskId(taskId) {}

    bool operator<(const Task& other) const {
        if (priority != other.priority) {
            return priority < other.priority; // 优先级越小，优先级越高
        }
        return taskId > other.taskId; // 任务id越小，先进入队列的优先级越高
    }
};

int main() {
    int n;
    cin >> n;

    vector<priority_queue<Task>> printers(6); // 创建5台打印机的优先级队列，索引从1到5

    int taskCounter = 1; // 文件的编号，从1开始

    for (int i = 0; i < n; i++) {
        string action;
        int printer, priority;
        cin >> action;

        if (action == "IN") { // 如果是IN事件
            cin >> printer >> priority;
            printers[printer].push(Task(taskCounter, priority, i)); // 将文件放入打印机的优先级队列中
            taskCounter++; // 文件编号自增
        } else if (action == "OUT") { // 如果是OUT事件
            cin >> printer;
            if (!printers[printer].empty()) { // 如果打印机的队列不为空
                Task task = printers[printer].top(); // 获取优先级最高的文件
                printers[printer].pop(); // 从队列中取出该文件
                cout << task.num << endl; // 输出文件编号
            } else {
                cout << "NULL" << endl; // 队列为空，输出NULL
            }
        }
    }

    return 0;
}
```

